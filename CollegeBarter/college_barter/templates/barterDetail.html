<ui-view>
    <div class="detail-title">
        <span class="detail-time"><strong>{$zh.time$}</strong>{$barter.time$}</span>
        <h2 class="text-center">物品详情</h2>
        <div class="fav pull-right" ng-if="barter.is_collected==0" ng-click="toggleCollectBarter($event,barter)">收藏</div>
        <div class="fav pull-right" ng-if="barter.is_collected==1" ng-click="toggleCollectBarter($event,barter)">取消收藏</div>
        <div class="delete pull-right" ng-if="barter.creatorName === username" ng-click="deleteBarter()">删除</div>
    </div>
    <div class="detail">
        <h3>{$barter.title$}</h3>
        <div>
            <!--<span class="glyphicon glyphicon-star detail-collect pull-right" ng-if="barter.is_collected==1" ng-click="toggleCollectBarter($event,barter)"></span>-->
            <!--<span class="glyphicon glyphicon-star-empty detail-collect" ng-if="barter.is_collected==0" ng-click="toggleCollectBarter($event,barter)"></span>-->
            <img class="detail-head" ng-src="{$upload_image_url + barter.headimg$}"/>
            <span class="detail-creator">{$barter.creatorName$}</span>
            <!--<div class="buy pull-right" ng-if="barter.saleState !== 0 && barter.creatorName !== username">交易中</div>-->
            <div class="state pull-right" ng-if="barter.creatorName === username">
                <select class="form-control" ng-model="barter.saleState"
                        ng-options="item.value as item.name for item in categoryList" ng-change="changeBarterState(barter.saleState)">
                    <!--<option value="">更改状态</option>-->
                </select>
            </div>
            <div class="buy pull-right" ng-if="barter.saleState === 0 && barter.creatorName !== username" ng-click="changeBarterState(1)">拍下</div>
        </div>
        <div class="">
            <img class="barter-img-show" ng-if="barter.image_one_sha1!==''" ng-src="{$resize_image_url + barter.image_one_sha1$}"/>
            <img class="barter-img-show" ng-if="barter.image_two_sha1!==''" ng-src="{$resize_image_url + barter.image_two_sha1$}"/>
            <img class="barter-img-show" ng-if="barter.image_three_sha1!==''" ng-src="{$resize_image_url + barter.image_three_sha1$}"/>
            <img class="barter-img-show" ng-if="barter.image_four_sha1!==''" ng-src="{$resize_image_url + barter.image_four_sha1$}"/>
        </div>
        <strong>{$zh.description$}</strong>
        <p class="detail-description">{$barter.content$}</p>
        <div class="modal fade" id="deleteModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                        <h4 class="modal-title" id="myModalLabel">确认要删除该物品吗？</h4>
                    </div>
                    <div class="modal-body">
                        <div class="del_cancel">
                            <button class="delete" ng-click="delete()">确认</button>
                            <button class="cancel" data-dismiss="modal">取消</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</ui-view>
